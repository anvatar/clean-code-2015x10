# 12장. 창발성

켄트 벡의 **단순한 설계** 규칙 (중요도 순)

1. 모든 테스트를 실행한다.
2. 중복을 없앤다.
3. 프로그래머 의도를 표현한다.
4. 클래스와 메서드 수를 최소로 줄인다.

(경험 상) 위 규칙을 따르면 소프트웨어 설계 품질이 크게 높아진다.

단순한 설계 규칙을 따른다면, 따르지 않았을 경우 수 년이 걸려야 익힐 수 있는 우수한 기법과 원칙을 단번에 활용할 수 있다.

## 모든 테스트를 실행하라

검증이 불가능한 시스템은 출시하면 안 된다.

- 시스템이 설계 의도 대로 동작하는지 검증할 수 있는 간단한 방법이 테스트다.

테스트가 가능한 시스템을 만들려고 애쓰면 설계 품질이 좋아진다.

- 결합도가 높으면 테스트 케이스를 작성하기 어려우므로 개발자는 결합도를 낮추기 위해 노력한다.
- SRP를 준수하는 클래스가 테스트 하기 쉬우므로 개발자는 크기가 작고 하나의 목적만 수행하는 클래스를 작성하기 위해 노력한다.
- 테스트 케이스가 있으므로 시스템이 깨질까 걱정할 필요 없이 코드를 정리할 수 있다.

## 중복을 없애라

중복의 해악: 추가 작업, 추가 위험, 불필요한 복잡도

중복의 형태

- 똑같은 코드
- 비슷한 코드: 더 비슷하게 고쳐주면 리팩터링이 쉬워진다.
- 구현 중복 (`isEmpty()` vs `size()`)

재사용

- 단 몇 줄이라도 중복 코드를 제거하다 보면 소규모의 재사용 기회가 생긴다. (메서드 추출, 클래스 이동, 메서드 가시성 상승, ...)
- 이런 소규모 재사용이 시스템 복잡도를 극적으로 줄여준다.
- 소규모 재사용을 제대로 익혀야 대규모 재사용이 가능하다.

TEMPLATE METHOD 패턴

- 고차원적인 중복을 제거하기 위해 자주 사용

## 표현하라

코드를 명백하게 작성하지 않으면,

- 시스템이 점차 복잡해지면서 유지보수 개발자가 시스템을 이해하느라 보내는 시간이 점점 늘어난다.
- 코드를 오해할 가능성이 켜지면서 결함 발생율이 높아진다.

코드에 개발자의 의도를 분명히 표현하기 위한 방법

- 좋은 이름
- 함수와 클래스 크기를 최대한 줄인다.
- 표준 명칭
    - 설계 의도를 쉽게 이해할 수 있도록 클래스 이름에 패턴 이름 넣기
    - 디자인 패턴은 의사소통과 표현력 강화를 돕는다.
- 단위 테스트 케이스를 꼼꼼히 작성한다. (테스트는 '예제로 보여주는 문서')

노력이 가장 중요하다.

- 동작하게만 코드를 작성한 뒤 다음 문제로 넘어가지 말고,
- 표현력을 높이기 위해 자신의 작품에 조금만 더 주의를 기울이자.

## 클래스와 메서드 수를 최소로 줄여라

좋은 개념도 극단으로 치달으면 득보다 실이 많아진다.

- 조그만 클래스와 메서드를 수없이 많이 만들지는 말 것.
- 독단적인 견해는 멀리하고 실용적인 방식을 택하라.

테스트 케이스를 만들고 중복을 제거하고, 의도를 표현하는 작업보다는 덜 중요하다.
